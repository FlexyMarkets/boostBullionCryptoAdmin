import{$ as G,a0 as C,C as O,W as P,r as k,b4 as q,j as e,J as s,b5 as B,S as m,R as I,aB as M,Y as c,V as N,Z as V,_ as S}from"./index-DJkOrddM.js";import{D as J}from"./Divider-BTZhOkRD.js";import{G as u}from"./Grid2-DMXzHL4Q.js";import{T as v}from"./TextField-B_T7QZCB.js";import"./MenuItem-C6Me-RSo.js";import"./Select-BO3C6JoM.js";const Q=G({amount:C().trim().min(1,"Please type your transfer amount"),referralCode:C().trim().min(1,"Please type your referral code")});function U({userData:o,userDataLoading:w}){var j,b,g;const d=o==null?void 0:o.referralCode,x=O(),f={referralCode:d,amount:""},{register:h,handleSubmit:z,watch:F,reset:p,formState:{errors:i}}=P({resolver:V(Q),defaultValues:f});k.useEffect(()=>{p({referralCode:d})},[d]);const n=F("referralCode"),{data:t,isError:R,error:l,isFetching:A}=q({referralCode:n},{skip:!n,refetchOnMountOrArgChange:!0,refetchOnReconnect:!0});let a=null;!n||n.trim()===""?a=null:A?a=e.jsx(s,{children:"Loading..."}):R?a=e.jsx(s,{color:"red",children:(j=l==null?void 0:l.data)==null?void 0:j.message}):(b=t==null?void 0:t.data)!=null&&b.name&&(a=e.jsx(s,{children:(g=t==null?void 0:t.data)==null?void 0:g.name}));const[T,{isLoading:E}]=B(),L=async W=>{var y;try{const r=await T(W).unwrap();r!=null&&r.status&&(p(f),x(S({open:!0,message:r==null?void 0:r.message,severity:"success"})))}catch(r){r!=null&&r.data&&x(S({open:!0,message:((y=r==null?void 0:r.data)==null?void 0:y.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(m,{mt:"30px",children:[e.jsx(s,{variant:"h5",fontWeight:"bold",mb:"2rem",children:"Add fund"}),w?e.jsx(I,{mt:"10rem"}):e.jsxs(M,{sx:{padding:{xs:"1rem",sm:"2rem"},borderRadius:"2rem",boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)"},children:[e.jsx(s,{variant:"h6",m:{xs:"1rem",sm:"0"},children:"Fill details"}),e.jsx(J,{sx:{my:"1.2rem"}}),e.jsxs(m,{gap:"2rem",component:"form",onSubmit:z(L),children:[e.jsxs(u,{container:!0,size:12,spacing:2,children:[e.jsxs(u,{item:!0,size:{xs:12,sm:6},children:[e.jsx(c,{sx:{mb:".5rem"},children:"Referral Code *"}),e.jsx(v,{disabled:!0,...h("referralCode",{require:!0}),size:"small",fullWidth:!0,placeholder:"Referral code",variant:"outlined"}),e.jsx(c,{sx:{mb:".5rem"},children:a}),i.referralCode&&e.jsx(s,{color:"error",children:i.referralCode.message})]}),e.jsxs(u,{item:!0,size:{xs:12,sm:6},children:[e.jsx(m,{sx:{flexDirection:"row",justifyContent:"space-between"},children:e.jsx(c,{sx:{mb:".5rem"},children:"Amount *"})}),e.jsx(v,{...h("amount",{require:!0}),size:"small",fullWidth:!0,placeholder:"Amount transfer",variant:"outlined"}),i.amount&&e.jsx(s,{color:"error",fontSize:"13px",children:i.amount.message})]})]}),e.jsx(N,{variant:"contained",size:"small",type:"submit",disabled:E,sx:{textTransform:"capitalize",width:"5rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})]})}export{Q as addFundSchema,U as default};
