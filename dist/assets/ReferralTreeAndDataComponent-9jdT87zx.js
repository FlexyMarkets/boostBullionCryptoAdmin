import{j as r,aB as L,R as u,r as h,V as S,S as m,J as x,K as d,a2 as N,O as w,b4 as I,C as A,ba as D,bb as M}from"./index-DJkOrddM.js";import{L as j,M as v}from"./MenuItem-C6Me-RSo.js";import{L as E,E as B,C as O}from"./ExpandMore-BDq_mFfM.js";import{L as z,E as W}from"./ExpandLess-U2XLrrZq.js";import{C as P}from"./Close-ChGvmQUK.js";import{D as G}from"./Divider-BTZhOkRD.js";function b({node:e,onClick:o}){var c;const[t,s]=h.useState(!1),n=()=>{o(e.title)},l=a=>{a.stopPropagation(),e.hasChildren&&s(i=>!i)};return r.jsxs(r.Fragment,{children:[r.jsxs(E,{button:!0,onClick:n,sx:{pl:2},children:[r.jsx(z,{primary:e.title,sx:{"& .MuiListItemText-primary":{fontSize:"15px"},cursor:"pointer"}}),e.hasChildren&&r.jsx(S,{onClick:l,size:"small",variant:"contained",type:"submit",sx:{textTransform:"capitalize",minWidth:"1.5rem",p:"4px",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white",ml:"1rem","&:hover":{boxShadow:"none"}},children:t?r.jsx(W,{}):r.jsx(B,{})})]}),e.hasChildren&&r.jsx(O,{in:t,timeout:"auto",unmountOnExit:!0,children:r.jsx(j,{component:"div",disablePadding:!0,children:(c=e.children)==null?void 0:c.filter(Boolean).map((a,i)=>r.jsx(b,{node:a,onClick:o},i))})})]})}function Q({listData:e=[],onClick:o,loadingListData:t}){return r.jsx(L,{sx:{mt:"30px",p:"1rem",display:"flex",flexDirection:"column",gap:".5rem",borderRadius:"2rem",boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)"},children:t?r.jsx(u,{}):r.jsx(j,{children:e.map((s,n)=>r.jsx(b,{node:s,onClick:o},n))})})}function F({data:e,loading:o,onClose:t}){var n;const s={Name:(e==null?void 0:e.name)||"N/A","Referral code":(e==null?void 0:e.referralCode)||"N/A",Email:(e==null?void 0:e.email)||"N/A",Sponser:(e==null?void 0:e.sponser)||"N/A","Total team turnover balance":(e==null?void 0:e.totalTeamTurnoverBalance)||"N/A","Total team":(e==null?void 0:e.totalTeam)||"N/A","Total reward balance":(e==null?void 0:e.totalRewardBalance)||"N/A","Total staked balance":(e==null?void 0:e.totalStakedBalance)||"N/A","Login id":(e==null?void 0:e.loginId)||"N/A","Direct referral team":(e==null?void 0:e.directReferralTeam)||"N/A"};return r.jsxs(m,{sx:{display:"flex",flexDirection:"column",gap:".5rem",borderRadius:"2rem"},children:[r.jsxs(m,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(x,{variant:"h5",fontWeight:"bold",children:"Referral User data"}),r.jsx(P,{sx:{cursor:"pointer"},onClick:t})]}),r.jsx(G,{sx:{my:"5px"}}),o?r.jsx(u,{}):(n=Object.entries(s))==null?void 0:n.map(([l,c],a)=>r.jsxs(d,{sx:{display:"flex",gap:"1rem",justifyContent:"space-between"},children:[r.jsxs(x,{children:[l," :"]}),r.jsx(x,{children:c})]},a))]})}function g(e){const o=[];for(const t in e){const s=e[t],n={title:t,hasChildren:s&&typeof s=="object",children:s&&typeof s=="object"?g(s):[]};o.push(n)}return o}function J({open:e,onClose:o,Content:t,modalWidth:s,contentData:n,loading:l}){const c={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:s||600,bgcolor:"background.paper",borderRadius:".5rem",boxShadow:24,p:3};return r.jsx(v,{keepMounted:!0,open:e,onClose:o,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:r.jsx(d,{sx:c,children:r.jsx(t,{data:n,loading:l,onClose:o})})})}function Y(){const{id:e}=N(),{selectedReferralCode:o}=w(p=>p.admin),[t,s]=h.useState(!1),{data:n,isLoading:l}=I({referralCode:o},{skip:!o}),c=!l&&(n==null?void 0:n.data),a=A(),{data:i,isLoading:C}=D({userId:e},{skip:!e}),R=i!=null&&i.data?g(i==null?void 0:i.data):[];function y(p){const f=p==null?void 0:p.match(/-(\w+)-/),k=f?f[1]:null;a(M(k)),s(!0)}const T=()=>s(!1);return r.jsxs(m,{sx:{mt:"30px"},children:[r.jsx(x,{variant:"h6",fontWeight:"bold",children:"Referral Tree"}),r.jsx(Q,{listData:R,loadingListData:C,onClick:y}),r.jsx(J,{modalWidth:{xs:"90%",sm:600},open:t,onClose:T,Content:F,contentData:c,loading:l})]})}export{Y as default};
